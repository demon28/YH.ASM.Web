
@{
    ViewData["Title"] = "售后管理系统";

    Layout = "";
}



    <html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <!-- Tell the browser to be responsive to screen width -->
        <!-- Bootstrap 3.3.7 -->
        <link rel="stylesheet" href="~/Reference/adminLTE/bower_components/bootstrap/dist/css/bootstrap.min.css">


        <!-- Font Awesome -->
        <link rel="stylesheet" href="~/Reference/adminLTE/bower_components/font-awesome/css/font-awesome.min.css">
        <!-- Ionicons -->
        <link rel="stylesheet" href="~/Reference/adminLTE/bower_components/Ionicons/css/ionicons.min.css">
        <!-- Theme style -->

        <link rel="stylesheet" href="~/Reference/adminLTE/dist/css/AdminLTE.css">

        <link rel="stylesheet" href="~/Reference/adminLTE/dist/css/skins/_all-skins.min.css">


        <script src="~/Reference/scripts/jquery-3.3.1.min.js"></script>
        <script src="~/Reference/vue/vue.min.js"></script>


        <!-- daterange picker -->
        <link rel="stylesheet" href="~/Reference/adminLTE/bower_components/bootstrap-daterangepicker/daterangepicker.css">
        <!-- bootstrap datepicker -->
        <link rel="stylesheet" href="~/Reference/adminLTE/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">

        <!-- fullCalendar -->
        <link rel="stylesheet" href="~/Reference/adminLTE/bower_components/fullcalendar/dist/fullcalendar.min.css">
        <link rel="stylesheet" href="~/Reference/adminLTE/bower_components/fullcalendar/dist/fullcalendar.print.min.css" media="print">


    </head>
    <body class="hold-transition skin-blue sidebar-mini">



        <div id="tab_mounth" class="col-md-5">
            <div class="box box-primary">
                <div class="box-header">
                    <h3 class="box-title" id="cander_title">工作日历</h3>


                </div>
                <!-- /.box-header -->
                <div class="box-body table-responsive no-padding">

                    <div id="calendar"></div>

                </div>


                <div class="box-footer no-padding">



                </div>
            </div>
        </div>


        <script src="~/Reference/adminLTE/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
        <script src="~/Reference/adminLTE/bower_components/bootstrap-datepicker/dist/locales/bootstrap-datepicker.zh-CN.min.js"></script>


        <script src="~/Reference/adminLTE/bower_components/moment/moment.js"></script>
        <script src="~/Reference/adminLTE/bower_components/fullcalendar/dist/fullcalendar.js"></script>
        <script src="~/Reference/adminLTE/bower_components/fullcalendar/dist/locale/zh-cn.js"></script>
        <script src="~/Reference/scripts/jquery.bootstrap-growl.js"></script>
        <script src="~/Reference/scripts/alertsjavascrtpt.js"></script>
        <script src="~/js/jq-paginator.min.js"></script>
        <script src="~/Reference/bootbox/bootbox.min.js"></script>
        <script src="~/Reference/scripts/CommonScript.js"></script>

        <script>


            $(document).ready(function () {
                Load();

            });


            function Load() {

                console.log("eventis被调用了:" + uid);
                var uid = getQueryString("userid");



                $('#calendar').fullCalendar({
                    header: {
                        left: 'prev,next today',
                        center: 'title',
                    },
                    lang: 'zh-cn',
                    eventOrder: 'order',
                    
                    eventClick: function (calEvent, jsEvent, view) {
                        //日程区块，单击时触发
                        console.log(calEvent);
                     

                    },
                    events: function (start, end, timezone, callback) {

                        console.log("eventis被调用了:" + uid);
                        var date = this.getDate().format('YYYY-MM');


                        console.log("时间:" + date);


                        MyAjax({
                            url: "/Direction/ListCander",
                            type: "POST",
                            data: {
                                userid: uid,
                                date: date
                            },
                            success: function (result) {

                                if (!result.Success) {

                                    alert_danger("数据加载失败！");
                                }
                                var list = result.Content

                                $("#cander_title").html(list[0].USER_NAME + "  工作日历");
                                var event = [];

                                $.each(list, function (i) {

                                    var bgc = '#00a65a';
                                    var bdc = '#00a65a';
                                    var ismom = "早班";

                                    if (list[i].TYPE == 1) {
                                        bgc = '#0073b7';
                                        bdc = '#0073b7';
                                        ismom = "晚班";
                                    }

                                    console.log(ismom);

                                    event.push({
                                        title: ismom + "：" + list[i].PROJECTID,
                                        start: new Date(list[i].CREATETIME),
                                        order: list[i].TYPE,
                                        allDay: true,
                                        borderColor: bdc,
                                        backgroundColor: bgc,
                                        uid: uid,
                                        traid: list[i].TRAID
                                    });
                                });

                                callback(event);

                            }

                        });



                    }

                });

            }




        </script>

    </body>




    </html>